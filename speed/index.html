<body>
<style>
	body {
		margin: 0;
		display: flex;
		align-items: center;
		justify-content: center;
		height: 100%;
		font-size: 25vw;
		background: black;
		color: white;
		font-family: arial;
	}
</style>
<script>
	const rad = Math.PI / 180
	const harvesine = (lat1, lon1, lat2, lon2) => 12742e3 * Math.asin(Math.sqrt(
		Math.pow(Math.sin(((lat1 *= rad) - (lat2 *= rad)) / 2), 2) +
		Math.cos(lat1) * Math.cos(lat2) *
		Math.pow(Math.sin(((lon1 * rad) - (lon2 * rad)) / 2), 2)
	))
	const speed = document.body.appendChild(Object.assign(document.createElement('div'), {
		id: 'speed'
	}))
	let latitude = 0, longitude = 0, timestamp = 0
	navigator.geolocation.watchPosition(e => {
		const time = Math.abs(timestamp - (timestamp = e.timestamp)) / 1e3
		const distance = harvesine(latitude, longitude, latitude = e.coords.latitude, longitude = e.coords.longitude)
		speed.innerHTML = ((distance / time) * 3.6).toFixed(2)
	}, undefined, {
		enableHighAccuracy: true,
		timeout: 1000
	})
</script>
</body>
